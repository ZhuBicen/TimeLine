<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vue JS Intro</title>
    <script src ="./jQuery/jquery-1.11.1.min.js"></script>
	  <script src ="./bootstrap-3.2.0-dist/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.18/vue.min.js"></script>
	<link   href="./bootstrap-3.2.0-dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div id="app" class="panel panel-default">
  <div class="panel-heading">Task List</div>
  <div class="panel-body">
    <ol class="list-group">
      <todo-item v-on:start="start" v-for="(index, item) in todoList" v-bind:todo="item" v-bind:id="index"></todo-item>
    </ol>
  </div>

  <div class="panel-footer">
    <div class="form-group">
      <input type="text" class="form-control"  v-model="newTaskContent" placeholder="input new task here">
      <button v-on:click="newTask" class="btn btn-default">Add New Task</button>
    </div>
    <div v-show="workId != -1" class="progress">
      <div  class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:70%">
        <span class="sr-only">70% Complete</span>
      </div>
    </div>  
  </div>

  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Modal Header</h4>
        </div>
        <div class="modal-body">
          <p>This is a small modal.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  
</div>

<script>
Vue.component('todo-item', {
  props: ['id', 'todo'],
  template: '<li class="list-group-item"  v-on:mouseover="todo.active = true" v-on:mouseleave="todo.active = false" >' + 
    '{{ todo.text }} {{ todo.used}}/{{todo.estimate}}' + 
    '<button class="btn btn-default" v-on:click="$emit(\'start\', id)" v-show="todo.active" type="button" title="开始一个番茄" >Start</button>' +
    '</li>'
})

var app = new Vue({
  el: '#app',
  data: {
    newTaskContent: "New Task",
    workId: -1,
    todoList: [
      { active: false, text: '学习 Matlab', estimate: 1, used: 0, status: "notDone" },
      { active: false, text: '阅读 ReMapping 的代码', estimate: 2, used: 0, status: "notDone"},
      { active: false, text: '写一个新的升级平台的脚本', estimate: 3, used: 0, status: "notDone" }
    ]
  },
  methods: {
    start: function(taskId) {
      this.workId = taskId;
      console.info("Starting task for task:" + taskId)
    },
    newTask: function () {
	    this.todoList.push({ text: this.newTaskContent })
    }
  }
})
</script>

</body>
</html>